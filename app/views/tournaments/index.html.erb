<body>
	<h2 class="title">Tournaments</h2>
	<div class='create_btn'><%= link_to "New Tournament", new_tournament_url %></div>

<% if Tournament.any? %>
	<div class="detail">
		<%= pluralize(Tournament.count, 'tournament') %> have been created so far.
	</div>
	<div class="divider"></div>
    <table>
        <thead>
        	<tr>
        		<th>Tournament Name</th>
        		<th># of Players</th>
        		<th>Status</th>
        		<th>Winner</th>
        	</tr>
        </thead>
        <tbody>
        	<% Tournament.order("create_at DESC").each do |t| %>
            <tr>
                <td><%= link_to t.name, tournament_path(t) %></td>
                <td><%= t.player_count %></td>
                <td><%= t.active ? "Active" : "Inactive"  %></td>
                <% temp_id = t.winner_id %>
                <td>
                    <% if temp_id != 0 %>
                        <% p = Player.find(temp_id) %>
                        <%= p.first_name %> <%= p.last_name %>
                    <% else %>
                    	n/a
                    <% end %>
            	</td>
            </tr>
    	    <% end %>
        </tbody>
    </table>
<% else %>
    <div class="detail">No tournaments yet.</div>
<% end %>
</body>

